<!DOCTYPE html>
<html>
  <head>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.15/angular.js"></script>
    <script> 

      /**
      * rafflr Module
      *
      * Description
      * This is an app that can manage raffles
      */
      angular.module('rafflr', [])
        .controller('rafflrController', ['$scope', function($scope){
          //attach names to scope
          $scope.names = ["John", "Jeff", "Jack"];
          $scope.userName = "";

          //function that gets called when submit is clicked
          $scope.validateMatchFunction = function(){
            var randomName = getRandomIndexValue($scope.names);

            //notify user of chosen name
            alert("Random Name Choosen was "+randomName);

            //nested if statement to check if input was valid and then checking if it was a match
            if(containsValueIncaseSenitive($scope.names, $scope.userName)){
              if ($scope.userName.toLowerCase()===randomName.toLowerCase()){
                alert("It's a match!");
              } 
              else {
                alert("It's not a match.");
              }
            }else{
              alert("You cannot submit "+ $scope.userName);
            }
          }

          // This function returns a random value from an array writing it this way
          // allows it to be more of a utility function.
          var getRandomIndexValue = function(array){
            return array[Math.floor((Math.random() * array.length) )];
          }

          //This function returns true if the value exits in the array whether ot not 
          //case matches. If it does not match it returns false.
          var containsValueIncaseSenitive = function(array, value){
            var testArray = [];
            array.forEach(function(oldValue){
              testArray.push(oldValue.toLowerCase());
            });
            //return the boolean result of this computation
            return testArray.indexOf(value.toLowerCase()) > -1;
          }

        }]);

      

    </script>

  </head>
  
  <body ng-app="rafflr" ng-controller="rafflrController">
    <div class="container"> 
      <label for="name">Type in one of the following: John, Jeff, or Jack.</label><br/><br/>
      <input type="text" id="name" class="form-control" ng-model="userName">
      <br/>
      <input type="button" class="btn btn-primary" value="Submit" ng-click="validateMatchFunction()">
    </div>
  </body>

</html>
